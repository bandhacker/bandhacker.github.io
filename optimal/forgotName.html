<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <script src="../js/libraries/jquery-1.12.3.js"></script>
        <script src="../js/libraries/jquery-ui.js"></script>
		
		<script src="js/libraries/tabletop.js"></script>
		
		<link rel="stylesheet" type="text/css" href="css/sharedStyle.css">
		
        <style>
            * {
                font-family: arial;
                font-size:  0.96em;
                cursor:  default;
            }
			
			body {
				text-align: center;
				padding: 40px;
			}

			input, button {
				cursor: pointer;
			}
        </style>

    </head>
    <body>
		<input type="text" id="lostNameEmail" placeholder="email address" /><br />
		<button id="forgotName" class="button"></button>
		<div id="results"></div>
    </body>
</html>

<script>
	$('#forgotName').html('Find ' + ensVars.ensembleName + ' Name');
	
	var listOfUsers
	
	$(document).on('click', '#forgotName', function() {
		Tabletop.init({ key: ensVars.userListKey,
			callback: function (data, tabletop) {
				listOfUsers = data;
				
				//Clear any previous results
				$('#results').empty();
				
				//Look through each user for email address matches
				for (var sul = 0; sul < listOfUsers.length; sul++) {
					if (listOfUsers[sul]['Email Address'].toUpperCase() == $('#lostNameEmail').val().toUpperCase()) {
						$('#results').append('<p>' + listOfUsers[sul][ensVars.ensembleName + ' Name'] + ' (created ' + listOfUsers[sul]['Timestamp'] + ')<p>');
					};					
				};
				
				//If no matches, show this
				if ($('#results').html() == '') {
					$('#results').append('<p>email not found<p>');
				};
			},
			simpleSheet: true
		});
	});
</script>